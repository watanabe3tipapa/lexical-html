<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Markdown Editor</title>
    <style>
        #editor {
            width: 100%;
            height: 300px;
            border: 1px solid #ccc;
            padding: 10px;
            overflow-y: auto;
        }
        #preview {
            margin-top: 20px;
            border: 1px solid #ccc;
            padding: 10px;
        }
    </style>
</head>
<body>
    <h1>Markdown Editor</h1>
    <div id="editor" contenteditable="true">
        <!-- Users can type Markdown here -->
    </div>
    <div id="preview">
        <!-- Rendered Markdown will be shown here -->
    </div>
</body>
</html><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Lexical Single File Editor</title>
    <!-- React and ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Lexical Core Packages -->
    <script src="https://unpkg.com/lexical@0.13.1/dist/lexical.js"></script>
    <script src="https://unpkg.com/@lexical/react@0.13.1/dist/LexicalReact.js"></script>
    <script src="https://unpkg.com/@lexical/markdown@0.13.1/dist/LexicalMarkdown.js"></script>
    <!-- Lexical Additional Plugins -->
    <script src="https://unpkg.com/@lexical/rich-text@0.13.1/dist/LexicalRichText.js"></script>
    <script src="https://unpkg.com/@lexical/code@0.13.1/dist/LexicalCode.js"></script>
    <script src="https://unpkg.com/@lexical/list@0.13.1/dist/LexicalList.js"></script>
    <script src="https://unpkg.com/@lexical/history@0.13.1/dist/LexicalHistory.js"></script>
    <script src="https://unpkg.com/@lexical/link@0.13.1/dist/LexicalLink.js"></script>
    <!-- Babel for JSX transformation -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        .editor-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            border: 1px solid #ddd;
            min-height: 300px;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
    const { 
        LexicalComposer, 
        LexicalRichTextPlugin, 
        LexicalHistoryPlugin, 
        LexicalAutoFocusPlugin,
        LexicalMarkdownShortcutPlugin
    } = LexicalReact;

    const { 
        HeadingNode, 
        QuoteNode, 
        ListNode, 
        ListItemNode,
        CodeNode
    } = LexicalNodes;

    const { TRANSFORMERS } = LexicalMarkdown;

    function App() {
        const initialConfig = {
            namespace: 'MyEditor',
            nodes: [
                HeadingNode,
                QuoteNode,
                ListNode,
                ListItemNode,
                CodeNode
            ],
            theme: {
                root: 'p-4 border border-gray-300 min-h-[300px]',
                heading: {
                    h1: 'text-3xl font-bold mb-4',
                    h2: 'text-2xl font-semibold mb-3'
                },
                quote: 'border-l-4 border-gray-500 pl-4 italic my-4',
                list: {
                    ol: 'list-decimal pl-8 my-4',
                    ul: 'list-disc pl-8 my-4'
                },
                code: 'bg-gray-100 p-2 rounded font-mono text-sm'
            },
            onError: (error) => {
                console.error('エディタでエラーが発生しました:', error);
            }
        };

        return (
            <LexicalComposer initialConfig={initialConfig}>
                <div className="editor-container">
                    <LexicalRichTextPlugin 
                        contentEditable={
                            <div className="editor-input border p-2 min-h-[250px]" />
                        }
                        placeholder={
                            <div className="editor-placeholder absolute text-gray-500 pointer-events-none">
                                テキストを入力してください...
                            </div>
                        }
                    />
                    <LexicalHistoryPlugin />
                    <LexicalAutoFocusPlugin />
                    <LexicalMarkdownShortcutPlugin transformers={TRANSFORMERS} />
                </div>
            </LexicalComposer>
        );
    }

    // Render the App
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
    </script>
</body>
</html>